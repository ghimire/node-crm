
if(typeof(RGraph)=='undefined')RGraph={};RGraph.Fuel=function(id,min,max,value)
{this.id=id;this.canvas=document.getElementById(id);this.context=this.canvas.getContext?this.canvas.getContext("2d"):null;this.canvas.__object__=this;this.type='fuel';this.isRGraph=true;this.min=min;this.max=max;this.value=value;this.angles={};this.currentValue=null;this.uid=RGraph.CreateUID();this.canvas.uid=this.canvas.uid?this.canvas.uid:RGraph.CreateUID();RGraph.OldBrowserCompat(this.context);if(!this.canvas){alert('[FUEL] No canvas support');return;}
this.properties={'chart.colors':['Gradient(white:red)'],'chart.needle.color':'red','chart.gutter.left':5,'chart.gutter.right':5,'chart.gutter.top':5,'chart.gutter.bottom':5,'chart.text.size':10,'chart.text.color':'black','chart.text.font':'Arial','chart.contextmenu':null,'chart.annotatable':false,'chart.annotate.color':'black','chart.zoom.factor':1.5,'chart.zoom.fade.in':true,'chart.zoom.fade.out':true,'chart.zoom.factor':1.5,'chart.zoom.fade.in':true,'chart.zoom.fade.out':true,'chart.zoom.hdir':'right','chart.zoom.vdir':'down','chart.zoom.frames':25,'chart.zoom.delay':16.666,'chart.zoom.shadow':true,'chart.zoom.background':true,'chart.zoom.action':'zoom','chart.adjustable':false,'chart.resizable':false,'chart.resize.handle.background':null,'chart.icon':'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAfCAYAAAD0ma06AAAEGElEQVRIS7VXSyhtYRT+jnfe5FEMjAwUBiQGHikzRWIkkgy8YyDK+xnJK5JCeZSUGKBMiAyYkMxMJAMpSfJ+2/d8695/33NunSPnHqt2Z5+91/9/'+'/'+'/et9a/1b8Pn56dmMBhg/IWDgwNoNzc38PHxkXtN0+Tiexp9eH18fIDj1Bj63N/fw8vLS/wsmcHoqKmXT09PuL29RVFREU5OTvTJ6UIAgioQ+vLe09MTb29v8PX1RWBgICYnJ+XXIqDRWXN0dJT3nIDsWlpadP+lpSWZlD4KmL/8/'+'/7+Ls/S09N1/7y8PISHh+sK/QssDJWcHEyGCnB1dRUDAwPIzMzUx5GpAnZ1dcXy8jK2trbM5j06OsLc3JzISx8q4OzsLOOsAq6treHg4AAeHh4WJbq7u0Nzc7P+PiYmBnt7ezg9PcXExAQCAgLg5OSEx8dHuLu7Wwfc3t7G/v6+yEcjO8rIROGKaWdnZ+jr6zMDjI6OxvT0tDzr6uqS2KtksspwZ2cHjY2NuqSUhnHmilUCraysmElaWloKJpQCjI2NRX5+Pl5eXr6WlCv08/MTEMVOZDH+Zzw4CdlfX1/rDHt7ezE1NQXGkcYEKi4ulkVKYlpLGouBs/JiaGgIZL25uSlecXFxohAz/ccAz8/P4e/vj7q6Ojw8PMje5DNRy94MQ0JCUFtbK2wqKipE+sHBQbi4uPwMQ86ak5ODxMREVFdXIywsDCUlJRJDXnZlmJqaip6eHuTm5kqikGlycjIyMjL+ZrY9JSUgMzQiIgINDQ2ypaqqqkCZWXHsnjQEHB8fR0pKigAxabq7uyWOlJNxtLukTJDs7GxUVlZKDNl5oqKi8Pr6+jOAIyMjiI+Pl5JGQG4F1Qy+LN7f3fiUdGZmBsHBwRgbG8Pw8LD01ba2NmlX0rTtnTQLCwvSjEdHR3FxcSExLCwsRGRkpBR9vePzeMDyw3bT1NT0XXLiT4a7u7s4Pj4GGzd7K8GCgoKEsRR8I4Cm6hwHXV5eiv62GAE5npMTmFuBTCkzmzT7qs5Q9TlW/o6ODlvwhCHPM5SVPZIxYzNeXFxEa2srvL29YTC2GI3aMm3Zeq6urv4LMC0tDRsbG1K8k5KS9DgS0IwhKVFjSsJA22r9/f0oKCgQdvPz83JEmZ2dlcpD9maSshow0KZnlO8Csx9yK3BLKCMJPpf2xGMigdi9WXooaWdn53dxdP+amhrZh4eHh1hfX5cTW319vZyBnp+ffzNkBWBmhYaGysB/j322oCckJCArK0uGMlsJ5ubmBoPxRiMzFlomjr2MGdne3i5ANILRJEtJt6ysTG8h9gDl4am8vFwSUWron1O9LulXIOqk9pWftfdSS40yyj5Uh101wPRryuR7R1ZMX/U1pfy5IF40xcgUnGAc9wsGYxsFhy87kwAAAABJRU5ErkJggg==','chart.icon.redraw':true,'chart.background.image.stretch':false,'chart.background.image.x':null,'chart.background.image.y':null,'chart.labels.full':'F','chart.labels.empty':'E','chart.labels.count':5,'chart.centerx':null,'chart.centery':null,'chart.radius':null,'chart.scale.visible':false,'chart.scale.decimals':0,'chart.units.pre':'','chart.units.post':''}
if(this.value>this.max)this.value=this.max;if(this.value<this.min)this.value=this.min;RGraph.Register(this);}
RGraph.Fuel.prototype.Set=function(name,value)
{name=name.toLowerCase();if(name.substr(0,6)!='chart.'){name='chart.'+name;}
this.properties[name]=value;}
RGraph.Fuel.prototype.Get=function(name)
{if(name.substr(0,6)!='chart.'){name='chart.'+name;}
return this.properties[name.toLowerCase()];}
RGraph.Fuel.prototype.Draw=function()
{RGraph.FireCustomEvent(this,'onbeforedraw');this.currentValue=this.value;this.gutterLeft=this.properties['chart.gutter.left'];this.gutterRight=this.properties['chart.gutter.right'];this.gutterTop=this.properties['chart.gutter.top'];this.gutterBottom=this.properties['chart.gutter.bottom'];this.centerx=((this.canvas.width-this.gutterLeft-this.gutterRight)/2)+this.gutterLeft;this.centery=this.canvas.height-20-this.gutterBottom
this.radius=this.canvas.height-this.gutterTop-this.gutterBottom-20;if(typeof(this.Get('chart.centerx'))=='number')this.centerx=this.Get('chart.centerx');if(typeof(this.Get('chart.centery'))=='number')this.centery=this.Get('chart.centery');if(typeof(this.Get('chart.radius'))=='number')this.radius=this.Get('chart.radius');if(!this.colorsParsed){this.parseColors();this.colorsParsed=true;}
this.angles.start=(PI+HALFPI)-0.5;this.angles.end=(PI+HALFPI)+0.5;this.angles.needle=this.getAngle(this.value);this.DrawLabels();this.DrawChart();if(this.Get('chart.contextmenu')){RGraph.ShowContext(this);}
if(this.Get('chart.resizable')){RGraph.AllowResizing(this);}
RGraph.InstallEventListeners(this);RGraph.FireCustomEvent(this,'ondraw');}
RGraph.Fuel.prototype.DrawChart=function()
{var context=this.context;var canvas=this.canvas;this.DrawScale();if(!RGraph.isOld()){this.DrawIcon();}
this.DrawNeedle();}
RGraph.Fuel.prototype.DrawLabels=function()
{if(!this.properties['chart.scale.visible']){var radius=(this.radius-20);this.context.fillStyle=this.Get('chart.text.color');var y=this.centery-Math.sin(this.angles.start-PI)*(this.radius-25);var x=this.centerx-Math.cos(this.angles.start-PI)*(this.radius-25);RGraph.Text(this.context,this.Get('chart.text.font'),this.Get('chart.text.size'),x,y,this.Get('chart.labels.empty'),'center','center');var y=this.centery-Math.sin(this.angles.start-PI)*(this.radius-25);var x=this.centerx+Math.cos(this.angles.start-PI)*(this.radius-25);RGraph.Text(this.context,this.Get('chart.text.font'),this.Get('chart.text.size'),x,y,this.Get('chart.labels.full'),'center','center');}}
RGraph.Fuel.prototype.DrawNeedle=function()
{this.context.beginPath();this.context.lineWidth=5;this.context.lineCap='round';this.context.strokeStyle=this.Get('chart.needle.color');var angle=this.angles.needle;this.context.arc(this.centerx,this.centery,this.radius-30,angle,angle+0.0001,false);this.context.lineTo(this.centerx,this.centery);this.context.stroke();this.context.lineWidth=1;var cx=this.centerx+10;var cy=this.centery-10
var grad=this.context.createRadialGradient(cx,cy,35,cx,cy,0);grad.addColorStop(0,'black');grad.addColorStop(1,'#eee');if(navigator.userAgent.indexOf('Firefox/6.0')>0){grad=this.context.createLinearGradient(cx+10,cy-10,cx-10,cy+10);grad.addColorStop(1,'#666');grad.addColorStop(0.5,'#ccc');}
this.context.beginPath();this.context.fillStyle=grad;this.context.moveTo(this.centerx,this.centery);this.context.arc(this.centerx,this.centery,20,0,TWOPI,0);this.context.fill();}
RGraph.Fuel.prototype.DrawScale=function()
{var a,x,y;this.context.beginPath();this.context.strokeStyle='black';this.context.fillStyle='white';this.context.arc(this.centerx,this.centery,this.radius,this.angles.start,this.angles.end,false);this.context.arc(this.centerx,this.centery,this.radius-10,this.angles.end,this.angles.start,true);this.context.closePath();this.context.stroke();this.context.fill();var start=this.angles.start;var end=this.angles.needle;this.context.beginPath();this.context.fillStyle=this.Get('chart.colors')[0];this.context.arc(this.centerx,this.centery,this.radius,start,end,false);this.context.arc(this.centerx,this.centery,this.radius-10,end,start,true);this.context.closePath();this.context.fill();for(a=this.angles.start;a<=this.angles.end+0.01;a+=((this.angles.end-this.angles.start)/5)){this.context.beginPath();this.context.arc(this.centerx,this.centery,this.radius-10,a,a+0.0001,false);this.context.arc(this.centerx,this.centery,this.radius-15,a+0.0001,a,true);this.context.stroke();}
if(this.properties['chart.scale.visible']){this.context.fillStyle=this.properties['chart.text.color'];var numLabels=this.properties['chart.labels.count'];var decimals=this.properties['chart.scale.decimals'];var font=this.properties['chart.text.font'];var size=this.properties['chart.text.size'];var units_post=this.properties['chart.units.post'];var units_pre=this.properties['chart.units.pre'];for(var i=0;i<=numLabels;++i){a=((this.angles.end-this.angles.start)*(i/numLabels))+this.angles.start;y=this.centery-Math.sin(a-PI)*(this.radius-25);x=this.centerx-Math.cos(a-PI)*(this.radius-25);RGraph.Text(this.context,font,size,x,y,RGraph.number_format(this,(this.min+((this.max-this.min)*(i/numLabels))).toFixed(decimals),units_pre,units_post),'center','center');}}}
RGraph.Fuel.prototype.getShape=function(e)
{}
RGraph.Fuel.prototype.getValue=function(e)
{var mouseXY=RGraph.getMouseXY(e);var angle=RGraph.getAngleByXY(this.centerx,this.centery,mouseXY[0],mouseXY[1]);if(angle>=this.angles.end){return this.max;}else if(angle<=this.angles.start){return this.min;}
var value=(angle-this.angles.start)/(this.angles.end-this.angles.start);value=value*(this.max-this.min);value=value+this.min;return value;}
RGraph.Fuel.prototype.getObjectByXY=function(e)
{var mouseXY=RGraph.getMouseXY(e);var angle=RGraph.getAngleByXY(this.centerx,this.centery,mouseXY[0],mouseXY[1]);var accuracy=15;var leftMin=this.centerx-this.radius;var rightMax=this.centerx+this.radius;var topMin=this.centery-this.radius;var bottomMax=this.centery+this.radius;if(mouseXY[0]>leftMin&&mouseXY[0]<rightMax&&mouseXY[1]>topMin&&mouseXY[1]<bottomMax){return this;}}
RGraph.Fuel.prototype.DrawIcon=function()
{if(!RGraph.isOld()){var img=new Image();img.src=this.Get('chart.icon');img.__object__=this;this.__icon__=img;img.onload=function(e)
{var obj=img.__object__;obj.context.drawImage(img,obj.centerx-(img.width/2),obj.centery-obj.radius+35);obj.DrawNeedle();if(obj.Get('chart.icon.redraw')){obj.Set('chart.icon.redraw',false);RGraph.Clear(obj.canvas);RGraph.RedrawCanvas(obj.canvas);}}}
this.DrawNeedle();}
RGraph.Fuel.prototype.Adjusting_mousemove=function(e)
{if(RGraph.Registry.Get('chart.adjusting')&&RGraph.Registry.Get('chart.adjusting').uid==this.uid){this.value=this.getValue(e);RGraph.Clear(this.canvas);RGraph.RedrawCanvas(this.canvas);RGraph.FireCustomEvent(this,'onadjust');}}
RGraph.Fuel.prototype.getAngle=function(value)
{if(value<this.min||value>this.max){return null;}
var angle=(((value-this.min)/(this.max-this.min))*(this.angles.end-this.angles.start))+this.angles.start;return angle;}
RGraph.Fuel.prototype.parseColors=function()
{var props=this.properties;var colors=props['chart.colors'];for(var i=0;i<colors.length;++i){colors[i]=this.parseSingleColorForLinearGradient(colors[i]);}
props['chart.needle.color']=this.parseSingleColorForRadialGradient(props['chart.needle.color']);}
RGraph.Fuel.prototype.parseSingleColorForLinearGradient=function(color)
{if(!color||typeof(color)!='string'){return color;}
if(color.match(/^gradient\((.*)\)$/i)){var parts=RegExp.$1.split(':');var grad=this.context.createLinearGradient(this.properties['chart.gutter.left'],0,this.canvas.width-this.properties['chart.gutter.right'],0);var diff=1/(parts.length-1);grad.addColorStop(0,RGraph.trim(parts[0]));for(var j=1;j<parts.length;++j){grad.addColorStop(j*diff,RGraph.trim(parts[j]));}}
return grad?grad:color;}
RGraph.Fuel.prototype.parseSingleColorForRadialGradient=function(color)
{if(!color||typeof(color)!='string'){return color;}
if(color.match(/^gradient\((.*)\)$/i)){var parts=RegExp.$1.split(':');var grad=this.context.createRadialGradient(this.centerx,this.centery,0,this.centerx,this.centery,this.radius);var diff=1/(parts.length-1);grad.addColorStop(0,RGraph.trim(parts[0]));for(var j=1;j<parts.length;++j){grad.addColorStop(j*diff,RGraph.trim(parts[j]));}}
return grad?grad:color;}